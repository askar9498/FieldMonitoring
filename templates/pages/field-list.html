<div class="container-fluid mt-2 d-flex flex-column h-100 justify-content-center">
    <div class="text-primary fs-5">Field List</div>
    <small class="mb-2">Total: {{ field_list|length }} Fields</small>
    <div id="fieldGrid" class="flex-grow-1 h-100"></div>
</div>

<script>
    var columnDefs = [
        { headerName: "Company", field: "company", sortable: true, filter: true },
        { headerName: "Field Name", field: "fieldName", sortable: true, filter: true },
        { headerName: "Field Type", field: "fieldType", sortable: true, filter: true },
        { headerName: "Number of Wells", field: "wells", sortable: true, filter: true },
        { headerName: "Field Size (kmÂ²)", field: "fieldSize", sortable: true, filter: true },
        {
            headerName: "Details",
            cellRenderer: function (params) {
                return `<button class="btn btn-sm btn-secondary" onclick="showDetails(${params.data.id})">Wells</button>`;
            }
        }
    ];

    var rowData = [
        {% for field in field_list %}
        {
            id: {{ field.id }},
            company: "{{ field.company.name }}",
            fieldName: "{{ field.name }}",
            fieldType: "{{ field.field_type }}",
            wells: {{ field.well_count|default:0 }},  
            fieldSize: {{ field.area|default:0 }}
        },
        {% endfor %}
    ];

    var gridOptions = {
        columnDefs: columnDefs,
        rowData: rowData,
        paginationPageSize: 10, 
        pagination: true,        
        domLayout: 'autoHeight' 
    };

    agGrid.createGrid(document.getElementById('fieldGrid'), gridOptions);

    function showDetails(id) {
        alert("Show details for field with ID: " + id);
    }
</script>
